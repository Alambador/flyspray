<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta content="text/html; charset=UTF-8" http-equiv="content-type" />
  <title>Flyspray tests</title>
</head>
<body>
<p><a href="/tests/selenium/TestRunner.html?test=../all_tests.php">Open the testrunner</a> 
  <font color="#FF0000">(The tests must run on an empty flyspray database, your 
  database will be altered, DO NOT use it on your production site)</font></p>
<h2>Quick start for the impatient</h2>
<ul>
  <li>Get <a href="http://selenium.thoughtworks.com/download.html">Selenium-0.6.zip</a> 
    and unpack it outside flyspray.</li>
  <li>From the unpacked file grab directory <i>selenium</i> and put in in <i>your-flyspray-install/tests/</i></li>
  <li>Create a new database flyspray-test <i>mysqladmin create flyspray-test</i></li>
  <li>Change your flyspray.conf.php to point to flyspray-test</li>
  <li>In order to quickly reset your database do an export with drop tables<br />
    <i>mysqldump -a -c --add-drop-table flyspray-test &gt; flyspray-test.sql</i><br />
    this will create a file <i>flyspray-test.sql</i></li>
  <li>Point your browser to http://your-flyspray-install/tests/</li>
  <li>Click <i>Open the testrunner</i></li>
  <li>Click <i>All</i> (in the top rightmost frame)</li>
  <li>After each test run you have to reset the database with <i>mysql flyspray-test 
    &lt; flyspray-test.sql</i></li>
</ul>
<h2>The flyspray test suite</h2>
<p>This is a test suite for your flyspray install. When you run it the browser 
  will be controlled by javascript and it will click its way through your flyspray 
  pages adding users and tasks and verifying that everything works as expected. 
  The tests are run by <a href="http://selenium.thoughtworks.com/index.html">Selenium</a>. 
</p>
<h3>Selenium in 100 words</h3>
<p>Selenium tests are written in plain html files. The file contains a three column 
  table with commands for the Selenium test runner. Below is a table that performs 
  the following test:</p>
<ul>
  <li>Open the index page</li>
  <li>Type <i>super</i> in the username box</li>
  <li>Type <i>secret </i>in the password box</li>
  <li>Click the login button and wait for the page to reload</li>
</ul>

<table border="1" cellspacing="0" cellpadding="0">
  <tr> 
    <td colspan="3">Test login</td>
  </tr>
  <tr> 
    <td>open</td>
    <td>/</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>type</td>
    <td>username</td>
    <td>super</td>
  </tr>
  <tr> 
    <td>type</td>
    <td>password</td>
    <td>secret</td>
  </tr>
  <tr>
    <td>clickAndWait</td>
    <td>login</td>
    <td>&nbsp;</td>
  </tr>
</table>
<a href="doc/selenium_docs/seleniumReference.html">Available commands are documented 
here</a> 
<p>Several test files are collected in a test suite. A test suite is a html file 
  with a one column table with ahref links to the test files.</p>
<table border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td>Test suite</td>
  </tr>
  <tr>
    <td><a href="link_to_test_login_file">test login</a></td>
  </tr>
  <tr>
    <td><a href="link_to_test_something_elst_file">test something else</a></td>
  </tr>
</table>
<p>To run the tests in the test suite you open the selenium test runner with the 
  test suite as an argument <a href="selenium/TestRunner.html?test=test_suite.html">selenium/TestRunner.html?test=test_suite.html</a> 
  (there is no test_suite.html so the page will display with a 404 not found. 
  If you are still confused check out the <a href="http://selenium.thoughtworks.com/demos.html">Selenium 
  demos</a>. </p>
<h3>The flyspray test suite in 100 words</h3>
<p>The flyspray test files are savant2 templates stored in the directory <i>/tests/flyspray_tests. 
  </i>The tests are numbered in the order they should be run, some of them depend 
  on previous test. Each test template is passed as an argument to <i>test_renderer.php. 
  </i>The test suite is displayed by <a href="all_tests.php">all_tests.php</a> 
  Take a look at it and study the links to the individual tests.</p>
<p>Common tasks like creating users, tasks etc are performed by savant2 plug-ins. 
  Check out the plug-in usage in the test files e.g <i>flyspray_tests/create_users.tpl.php 
  </i>The plug-ins are a way to save a lot of typing when writing tests. To save 
  even more typing copy and paste the variable definitions from the <a href="doc/plugin_docs">plug-in 
  docs</a>.</p>
<p>The tests are run by clicking <i>Open the testrunner</i> at the top of this 
  page MAKE SURE you don't run them on a production site. Data will be entered 
  into your flyspray, read more under <i>Quick start for the impatient</i></p>
<p>The <a href="doc/plugin_docs">plug-in docs</a> are made with <a href="http://www.phpdoc.org/index.php">phpdocumentor</a></p>
<h3>How to write tests</h3>
There is a test template in <i>test_template.tpl.php. </i>Copy it to <i>flyspray_tests</i> 
and give it a name <i>300_name_of_test.tpl.php. </i>The tests are run in the order 
they are numbered and they will show up in the test suite as <i>name of test. 
</i>Open the template in your favorite visual html tool and start typing commands. 
There is a Firefox extension <a href="http://seleniumrecorder.mozdev.org/">http://seleniumrecorder.mozdev.org/</a> 
that records your clicks and saves you the typing. 
</body>
</html>